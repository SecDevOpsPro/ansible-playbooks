---
# Cache Server Group Variables (Redis)

# Redis version
redis_version: "7.2"

# Redis configuration
redis_port: 6379
redis_bind: "0.0.0.0"
redis_protected_mode: "yes"
redis_requirepass: "{{ vault_redis_password }}"
redis_maxmemory: "2gb"
redis_maxmemory_policy: "allkeys-lru"

# Redis persistence
redis_appendonly: "yes"
redis_appendfsync: "everysec"
redis_save:
  - "900 1"
  - "300 10"
  - "60 10000"

# Redis cluster settings
redis_cluster_enabled: false
redis_cluster_config_file: "nodes.conf"
redis_cluster_node_timeout: 5000

# Redis replication
redis_replicaof: ""
redis_replica_read_only: "yes"

# Redis security
redis_rename_commands:
  - { command: "FLUSHDB", rename: "" }
  - { command: "FLUSHALL", rename: "" }
  - { command: "KEYS", rename: "" }

# Redis logs
redis_logfile: "/var/log/redis/redis-server.log"
redis_loglevel: "notice"

# Redis performance
redis_tcp_backlog: 511
redis_timeout: 0
redis_tcp_keepalive: 300
redis_databases: 16
