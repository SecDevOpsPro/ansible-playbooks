---
# Monitoring Group Variables

# Prometheus settings
prometheus_version: "2.48.0"
prometheus_config_dir: "/etc/prometheus"
prometheus_data_dir: "/var/lib/prometheus"
prometheus_port: 9090
prometheus_retention_time: "15d"

# Prometheus targets
prometheus_scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  - job_name: 'node_exporter'
    static_configs:
      - targets: "{{ groups['all'] | map('extract', hostvars, 'ansible_default_ipv4') | map(attribute='address') | map('regex_replace', '$', ':9100') | list }}"

# Node Exporter settings
node_exporter_version: "1.7.0"
node_exporter_port: 9100

# Grafana settings
grafana_version: "latest"
grafana_port: 3000
grafana_admin_user: "admin"
grafana_admin_password: "{{ vault_grafana_admin_password }}"
grafana_domain: "grafana.example.com"

# Prometheus datasource for Grafana
grafana_datasources:
  - name: "Prometheus"
    type: "prometheus"
    url: "http://localhost:9090"
    access: "proxy"
    is_default: true

# AlertManager settings
alertmanager_version: "0.26.0"
alertmanager_port: 9093
alert_email: "{{ fail2ban_destemail | default('admin@example.com') }}"
